meta {
  name: test JSON unsafe-int response
  type: http
  seq: 13
}

post {
  url: {{httpfaker}}/api/echo/custom
  body: json
  auth: none
}

body:json {
  {
    "headers": { "content-type": "application/json" },
    "content": "90071992547409919876"
  }
}

assert {
  res.body.toString(): eq 90071992547409920000
}

docs {
  Note: This test is not perfect, we should match the unparsed raw-response with the expected string version of the unsafe-integer
}

example {
  name: test JSON unsafe-int response example
  
  request: {
    url: {{httpfaker}}/api/echo/custom
    mode: json
    body:json: {
      {
        "headers": { "content-type": "application/json" },
        "content": "90071992547409919876"
      }
    }
  }
  
  response: {
    headers: {
      server: nginx/1.26.0
      date: Mon, 27 Oct 2025 22:37:52 GMT
      content-type: application/json
      transfer-encoding: chunked
      connection: keep-alive
      strict-transport-security: max-age=63072000; includeSubdomains
      x-frame-options: DENY
      x-content-type-options: nosniff
    }
  
    status: {
      code: 200
      text: 
    }
  
    body: {
      type: json
      content: '''
        90071992547409920000
      '''
    }
  }
}
